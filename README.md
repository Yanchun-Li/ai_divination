# AI占卜（日本市场）MVP规格说明

## 0. MVP目标（唯一目标）
验证三件事是否成立：
1) 日本用户是否愿意“每天轻量打开”
2) 用户是否愿意在关键时刻“停下来做一次仪式化占卜”
3) 用户是否会因为一次体验而产生“被理解”的感觉（并愿意复用/回访）

注意：MVP不追求“准”，不做“权威AI”，不做复杂陪伴人格。

---

## 1. 产品定位（一句话）
一个以“占卜”为仪式外壳、以“被理解”为核心体验、默认轻量、深度可选的AI情绪型娱乐App。

关键原则：
- 占卜 = 外壳/仪式/解释系统（允许不确定与模糊）
- AI = 站在用户这边的解释与共情，不承担权威裁决
- 默认可“不准但理解”；当用户主动要求“更准确/更严肃”时 -> 通过“更严格的占卜方法/规则”来升级（不是AI自称更权威）

---

## 2. MVP产品结构（只做2个模块）

### 模块A：每日轻量入口（高频）
目的：培养“每天看一眼”的习惯（频率）
- 功能：今日运势 / 今日状态
- 个性化来源（MVP任选其一即可）：星座 / 血型 / 生日
- 生成方式：可模板化 + 轻个性化（不需要复杂LLM也可）
- 不强调“准”，强调“轻量、调味、陪伴感”

成功信号（MVP级）：
- 次日回访率（D1）
- 是否出现固定时段打开（早上/睡前）

---

### 模块B：占卜 + AI对话（低频但重）
目的：验证“仪式成立 + 被理解成立”（重量）
- 用户带着问题进入（问题A）
- 用户选择占卜方式（MVP先只做1种，如塔罗）
- 进行一次“不可逆”的占卜结果展示
- AI基于占卜结果：解释 + 共情 + 点出隐含情绪/动机
- 用户选择：结束 / 继续聊 / 继续占卜（可选）

---

## 3. 核心用户流程（MVP必须闭环）

### 主流程（必须实现）
1) 输入问题A（用户自然语言）
2) 选择占卜方式（MVP：塔罗/运势/星座 任选其一；建议先塔罗）
3) 占卜仪式：
   - 明确开始动作（点确认/抽牌）
   - 生成一次结果（不可刷新/不可逆）
4) AI介入：
   - 解读占卜结果（结构化解释）
   - 提供情绪价值（共情/站队）
   - “被理解最小标准”（见第4节）
5) 明确结束信号：
   - “本次占卜结束”
6) 分支：
   - 结束
   - 继续对话（不必继续占卜）
   - 继续占卜（重新回到步骤2）

### 设计要点
- 不是每轮对话都占卜；占卜是“正式给答案”的入口/按钮
- 用户主动选择是否继续占卜（避免繁琐感）

---

## 4. “被理解”的最小可行定义（MVP验收标准）
MVP只需达到这一条：
- AI在一次对话中，能准确点出一个用户“没明确说出口，但用户一看就认同”的情绪/动机

示例（合格）：
- “你问的是他会不会回来，但你可能更担心的是：如果他不回来，你又要一个人面对。”

不要求（MVP不做）：
- 长期人生线索串联
- 深层心理画像
- 咨询师级个案概念化

---

## 5. 占卜仪式感下限（MVP规则）
每一次“正式给答案”的占卜至少满足3项中的2项：
1) 明确开始动作（抽牌/确认）
2) 结果不可逆（本次不可刷新、不可重抽）
3) 明确结束信号（“本次占卜结束”）

目的：让用户心理上区分“占卜” vs “陪聊”，避免空洞模板感。

---

## 6. AI角色边界（MVP必须遵守）

### AI是：
- 会占卜的解释者 + 情绪补充者
- 站在用户这边（不做审判者）
- 默认允许模糊（占卜解释体系支撑模糊的“深度”）

### AI不是：
- 权威裁决者（不以“我认为现实就是这样”下定论）
- 现实决策替代（不直接“你应该/必须”）
- 精准预测机器（不承诺准确率）

### “更准确/更严肃”触发方式（已确定）
- 用户主动要求更明确答案时：升级为“更严格的占卜规则/流程”
- 不是通过AI人格变得更权威

---

## 7. 记忆与可控遗忘（MVP安全版）
目标：让用户信赖且不防备；同时对上下文友好。

### 存储策略（建议）
- 短期记忆：当前会话完整上下文（仅在会话内）
- 中期记忆（可选）：压缩总结（主题/情绪模式/表达习惯）
- 长期记忆（MVP可极简或不做）：仅保留“反复出现的模式”标签

### 明确不保存（MVP建议禁止）
- 用户原话全文（逐字记录）
- 具体事件细节（地点/人物/具体经过）
- 精确时间点（可模糊化为“上个月/之前”）
- 可识别的关系人物信息

### 交互表达（用户感知）
- 推荐记忆表述：强调尊重与不占有
  - “我记得你之前提到过类似的感受，但我不想假装完全理解当时的你。”

---

## 8. 商业化（MVP只验证一种付费点）
原则：不卖权威、不卖更准、不卖更狠。

### 免费：
- 允许几轮对话
- 允许一次占卜体验（或每日一次）

### 付费触发（核心）
- 用户“刚开始被理解、想继续深入/更个性化”时
- 功能形式：
  - 增加对话轮数
  - 开启更强的个性化（基于中期总结/偏好）

---

## 9. MVP成功/失败判据（上线后看这些就够）

### 成功信号（命中1-2条就值得迭代）
- 用户二次进入时主动引用“上次你说的那个……”
- 用户从“今日运势”入口，愿意停下来进行一次占卜（刷 -> 停 -> 仪式）
- 用户在不强烈痛苦时仍会打开（“忍不住”看一眼）

### 失败信号
- 只看运势，不进占卜
- 占卜后立即退出，AI对话停留很低
- 用户反馈“模板化/空洞/像套话”

---

## 10. MVP阶段明确不做（避免范围膨胀）
- 多占卜体系并行（先做1种）
- 复杂人格系统
- 长期心理陪伴/咨询化
- 高精度预测与承诺
- 复杂订阅体系与多层付费

---

## 11. 给负责人的一句话开工指令
先做一个：
“每天可以看一眼今日运势 + 在需要时能认真停下来做一次占卜 + 在一次关键对话里让用户觉得被理解”的App。
其余一切（深度记忆、更多占卜体系、复杂商业化）都放到MVP之后。

---

## 开发说明

本仓库包含 FastAPI 后端（位于 `backend/`）与 Next.js 前端（位于 `web/`）。

### 前端（Next.js）
- 安装依赖：`cd web` 后执行 `npm install`
- 启动开发：`npm run dev`
- 构建：`npm run build`
- 运行：`npm start`

### 后端（FastAPI）
- `cd backend`
- `uv venv`
- `uv pip install -e .`
- `uv run uvicorn app.main:app --reload --port 8000`

环境变量示例：`backend/.env.example`

### 可选：Taskfile 快捷命令
- `task backend:setup`
- `task backend:dev`
- `task frontend:install`
- `task frontend:dev`
